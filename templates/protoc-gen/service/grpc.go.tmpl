// Code generated by protoc-gen-gomeet-service. DO NOT EDIT.
// source:{{ range .ProtoFiles }} {{.Name}}{{ end }}
package service

import (
	"github.com/fullstorydev/grpchan"
	{{ if .DbTypes }}"github.com/jinzhu/gorm"
	{{ end }}

	{{ range .QueueTypes }}{{ if eq . "memory" }}{{ lowerPascalCase . }}Queue "github.com/gomeet/gomeet-memory-queue/models"
	{{ else if eq . "rabbitmq" }}// rabbitmq support is not yet implemented
	{{ else if eq . "zeromq" }}// zeromq support is not yet implemented
	{{ else if eq . "sqs" }}// zeromq support is not yet implemented
	{{ end }}{{ end }}

	{{ range .SubServices }}svc{{ upperPascalCase .ShortName }}Pb "{{ .GoPkg }}/pb"
	{{ end }}// END SUB-SERVICES DEFINITION : import-pb
)

// Implements of {{ lowerPascalCase .ShortName }}Server
type {{ lowerPascalCase .ShortName }}Server struct {
	version             string
	subServicesRegistry grpchan.ServiceRegistry
	inProcessChannel    grpchan.Channel
	jwtSecret           string
	caCertificate       string
	certificate         string
	privateKey          string
	maxRecvMsgSize      int // The max message size in mega bytes the server can receive
	maxSendMsgSize      int // The max message size in mega bytes the server can send

	// EXTRA : var
	{{ range .DbTypes }}{{ lowerPascalCase . }}DataSourceName string
	{{ lowerPascalCase . }}Handle            *gorm.DB
	{{ end }}{{ range .QueueTypes }}
	{{ if eq . "memory" }}
	{{ lowerPascalCase . }}Queue             *{{ lowerPascalCase . }}Queue.Dispatcher
	{{ lowerPascalCase . }}QueueWorkerCount  int
	{{ lowerPascalCase . }}QueueMaxSize      int
	{{ else if eq . "rabbitmq" }}// rabbitmq support is not yet implemented
	{{ else if eq . "zeromq" }}// zeromq support is not yet implemented
	{{ else if eq . "sqs" }}// sqs support is not yet implemented
	{{ end }}{{ end }}
	{{ range .ExtraServeFlags }}{{ lowerPascalCase .Name }} {{ .Type }}
	{{ end }}// END EXTRA : var

	// SUB-SERVICES DEFINITION : var-address
	// svc{{ "{{SubServiceNamePascalCase}}" }}Address string
{{ range .SubServices }}	svc{{ upperPascalCase .ShortName }}Address string
	svc{{ upperPascalCase .ShortName }}Tls bool
{{ end }}	// END SUB-SERVICES DEFINITION : var-address

	// SUB-SERVICES DEFINITION : var-client
	// svc{{ "{{SubServiceNamePascalCase}}" }}GrpcClient svc{{ "{{SubServiceNamePascalCase}}" }}Pb.{{ "{{SubServiceNamePascalCase}}" }}Client
	{{ range .SubServices }}svc{{ upperPascalCase .ShortName }}GrpcClient svc{{ upperPascalCase .ShortName }}Pb.{{ upperPascalCase .ShortName }}Client
	{{ end }}// END SUB-SERVICES DEFINITION : var-client
}

